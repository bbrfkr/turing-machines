from lib.turing_machines import SingleTapeTuringMachine

tm = SingleTapeTuringMachine(
    tape=">10111001-00101011<",
    alphabets=[">", "1", "0", "-", "<"],
    states=[
        "qi",
        "q1",
        "q2",
        "q3",
        "q4",
        "q5",
        "q6",
        "q7",
        "q8",
        "q9",
        "qh",
    ],
    initial_state="qi",
    halt_state="qh",
    program=[
        ("qi", ">", "q1", ">", 1),
        # check source number
        ("q1", "0", "q1", "0", 1),
        ("q1", "1", "q1", "1", 1),
        ("q1", "-", "q6", "-", 1),
        ("q6", "0", "q6", "0", 1),
        ("q6", "1", "q7", "1", 1),
        ("q7", "0", "q7", "0", 1),
        ("q7", "1", "q7", "1", 1),
        ("q7", "<", "q2", "<", -1),
        ("q6", "<", "q8", "<", -1),
        # decrement source number
        ("q2", "0", "q2", "1", -1),
        ("q2", "1", "q3", "0", -1),
        ("q3", "0", "q3", "0", -1),
        ("q3", "1", "q3", "1", -1),
        ("q2", "-", "q4", "-", -1),
        ("q3", "-", "q4", "-", -1),
        # increment target number
        ("q4", "0", "q5", "1", -1),
        ("q4", "1", "q4", "0", -1),
        ("q5", "0", "q5", "0", -1),
        ("q5", "1", "q5", "1", -1),
        ("q4", ">", "q1", ">", 1),
        ("q5", ">", "q1", ">", 1),
        # clean up
        ("q8", "0", "q8", "-", -1),
        ("q8", "1", "q8", "-", -1),
        ("q8", "-", "q9", "-", -1),
        # finalize
        ("q9", "0", "q9", "0", -1),
        ("q9", "1", "q9", "1", -1),
        ("q9", ">", "qh", ">", 1),
    ],
)

tm.validate()
tm.execute()
